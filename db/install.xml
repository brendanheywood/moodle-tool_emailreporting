<?xml version="1.0" encoding="UTF-8" ?>
<XMLDB PATH="admin/tool/emailreporting/db" VERSION="20160213" COMMENT="XMLDB file for Moodle admin/tool/emailreporting"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="../../../../lib/xmldb/xmldb.xsd"
>
  <TABLES>
    <TABLE NAME="tool_emailreporting_log" COMMENT="Raw email tracking table">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="msgid" TYPE="text" NOTNULL="false" SEQUENCE="false" COMMENT="The email message Id header"/>
        <FIELD NAME="fromlocal" TYPE="text" NOTNULL="false" SEQUENCE="false" COMMENT="The local part of the from email"/>
        <FIELD NAME="fromdomain" TYPE="text" NOTNULL="false" SEQUENCE="false" COMMENT="The domain part of the from email"/>
        <FIELD NAME="tolocal" TYPE="text" NOTNULL="false" SEQUENCE="false" COMMENT="The local part of the to email"/>
        <FIELD NAME="todomain" TYPE="text" NOTNULL="false" SEQUENCE="false" COMMENT="The domain part of the to email"/>
        <FIELD NAME="subject" TYPE="text" NOTNULL="false" SEQUENCE="false" COMMENT="Email subject"/>
        <FIELD NAME="courseid" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false"/>
        <FIELD NAME="cmid" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false"/>
        <FIELD NAME="system" TYPE="text" NOTNULL="false" SEQUENCE="false" COMMENT="Moodle system"/>

        <FIELD NAME="sendtime" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false"/>
        <FIELD NAME="sendstatus" TYPE="int" LENGTH="1" NOTNULL="false" SEQUENCE="false" COMMENT="Sent status"/>

        <FIELD NAME="openedtime" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false"/>

        <FIELD NAME="clicktime" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false"/>
        <FIELD NAME="clickurl" TYPE="text" NOTNULL="false" SEQUENCE="false" COMMENT="Url in email clicked"/>

        <FIELD NAME="agentua" TYPE="text" NOTNULL="false" SEQUENCE="false" COMMENT="Useragent"/>
        <FIELD NAME="agentreferrer" TYPE="text" NOTNULL="false" SEQUENCE="false" COMMENT="Referrer"/>
        <FIELD NAME="agentsummary" TYPE="text" NOTNULL="false" SEQUENCE="false" COMMENT="Agent summary"/>
        <FIELD NAME="agentversion" TYPE="text" NOTNULL="false" SEQUENCE="false" COMMENT="Agent summary"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
        <KEY NAME="courseid" TYPE="foreign" FIELDS="courseid" REFTABLE="course" REFFIELDS="id"/>
        <KEY NAME="cmidid" TYPE="foreign" FIELDS="cmid" REFTABLE="course_modules" REFFIELDS="id"/>
      </KEYS>
    </TABLE>
  </TABLES>
</XMLDB>
